var facebookAppId;!function(e,o,n){var t=e.getElementsByTagName(o)[0];e.getElementById(n)||((e=e.createElement(o)).id=n,e.src="//connect.facebook.net/en_US/sdk.js",t.parentNode.insertBefore(e,t))}(document,"script","facebook-jssdk"),(facebookAppId="undefined"!=typeof qodeSocialLoginVars?qodeSocialLoginVars.social.facebookAppId:facebookAppId)&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),function(a){"use strict";var e={};function o(){var e,o=a(".qode-login-opener"),n=a(".qode-membership-close-modal .icon_close"),t=a(".qode-login-register-holder");o&&(e=a(".qode-login-register-content"),o.click(function(e){e.preventDefault(),t.fadeIn(300),t.addClass("opened")}),t.click(function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),a(".qode-login-register-content").click(function(e){e.stopPropagation()}),n.click(function(e){e.preventDefault(),t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),a(window).on("keyup",function(e){t.hasClass("opened")&&27==e.keyCode&&(t.fadeOut(300),t.removeClass("opened"))}),e.tabs())}function n(){a(".qode-login-form").on("submit",function(e){e.preventDefault();e={action:"qode_membership_login_user",security:a(this).find("#qode-login-security").val(),login_data:a(this).serialize()};return a.ajax({type:"POST",data:e,url:QodeAdminAjax.ajaxurl,success:function(e){e=JSON.parse(e);s(e),"success"==e.status&&(window.location=e.redirect)}}),!1})}function t(){a(".qode-register-form").on("submit",function(e){e.preventDefault();e={action:"qode_membership_register_user",security:a(this).find("#qode-register-security").val(),register_data:a(this).serialize()};return a.ajax({type:"POST",data:e,url:QodeAdminAjax.ajaxurl,success:function(e){e=JSON.parse(e);s(e),"success"==e.status&&(window.location=e.redirect)}}),!1})}function i(){var o=a(".qode-reset-pass-form");o.submit(function(e){e.preventDefault();e={action:"qode_membership_user_lost_password",user_login:o.find("#user_reset_password_login").val()};a.ajax({type:"POST",data:e,url:QodeAdminAjax.ajaxurl,success:function(e){e=JSON.parse(e);s(e),"success"==e.status&&(window.location=e.redirect)}})})}function s(e){var o=a(".qode-membership-response-holder"),n=_.template(a(".qode-membership-response-template").html()),t="success"===e.status?"qode-membership-message-succes":"qode-membership-message-error",n=n({messageClass:t,message:e.message});o.html(n)}function d(){a(".qode-facebook-login-holder").submit(function(e){e.preventDefault(),window.FB.login(function(e){"connected"===(e=e).status?(console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(e){var o=a(".qode-facebook-login-holder [name^=qode_nonce_facebook_login]").val();e.nonce=o,e.image=e.picture.data.url,a.ajax({type:"POST",data:{action:"qode_membership_check_facebook_user",response:e},url:QodeAdminAjax.ajaxurl,success:function(e){e=JSON.parse(e);s(e),"success"==e.status&&(window.location=e.redirect)}})})):"not_authorized"===e.status?console.log("Please log into this app"):console.log("Please log into Facebook")},{scope:"email, public_profile"})})}function r(){var e;(e="undefined"!=typeof qodeSocialLoginVars?qodeSocialLoginVars.social.googleClientId:e)?gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:e}),a(".qode-google-login-holder").submit(function(e){var o;e.preventDefault(),window.auth2.signIn(),window.auth2.isSignedIn.get()&&(e=window.auth2.currentUser.get().getBasicProfile(),o=a(".qode-google-login-holder [name^=qode_nonce_google_login]").val(),e={action:"qode_membership_check_google_user",response:{id:e.getId(),name:e.getName(),email:e.getEmail(),image:e.getImageUrl(),link:"https://plus.google.com/"+e.getId(),nonce:o}},a.ajax({type:"POST",data:e,url:QodeAdminAjax.ajaxurl,success:function(e){e=JSON.parse(e);s(e),"success"==e.status&&(window.location=e.redirect)}}))})}):a(".qode-google-login-holder").submit(function(e){e.preventDefault()})}function c(){var n,t,i,e=a("#qode-membership-update-profile-form");e.length&&(n=e.find("button"),t=n.data("updating-text"),i=n.data("updated-text"),e.on("submit",function(e){e.preventDefault();var o=n.html(),e=(n.html(t),{action:"qode_membership_update_user_profile",data:a(this).serialize()});return a.ajax({type:"POST",data:e,url:QodeAdminAjax.ajaxurl,success:function(e){e=JSON.parse(e);s(e),"success"==e.status?(n.html(i),window.location=e.redirect):n.html(o)}}),!1}))}"undefined"!=typeof qode&&(qode.modules.socialLogin=e),e.qodeUserLogin=n,e.qodeUserRegister=t,e.qodeUserLostPassword=i,e.qodeInitLoginWidgetModal=o,e.qodeInitFacebookLogin=d,e.qodeInitGooglePlusLogin=r,e.qodeUpdateUserProfile=c,a(document).ready(function(){o(),n(),t(),i(),c(),function(){var e=a(".header_bottom .qode-login-dropdown");{var o,n,t;e&&e.parent().offset()&&(o=a(window).width(),n=e.parent().offset().left,t=e.width(),o-n<t)&&e.addClass("qode-dd-right-position")}}()}),a(window).on("load",function(){d(),r()}),a(window).resize(function(){}),a(window).scroll(function(){})}(jQuery);